/**:
  ros__parameters:
    # ============================================================
    # TANGENTIAL SWING-UP + LQR CONTROLLER
    # TARGET EQUILIBRIUM: EP3 (Up-Up) - MAX ENERGY
    #   - First pendulum: POINTING UP (α = π)
    #   - Second pendulum: POINTING UP (β = 0, aligned with P1)
    # ============================================================
    
    control_frequency: 100.0  # Hz
    
    # ============================================================
    # SYSTEM PARAMETERS (from MATLAB EOM script & URDF)
    #
    # These MUST match your 'rotary_double_pendulum_eom_tangential.m' script
    # and be populated from your URDF/XACRO files.
    # ============================================================
    
    g: 9.81 # Gravity
    
    # --- Arm (Body 0) ---
    # URDF: revolute_Link
    M_arm: 0.21624
    # URDF: revolute_joint origin z
    l1: 0.2 
    # URDF: revolute_Link inertial origin x (approx)
    l2: 0.0175 
    # URDF: pendulum1_joint_x (absolute value)
    l3: 0.107
    # URDF: revolute_Link inertia izz
    I_arm: 0.000107 
    
    # --- Pendulum 1 (Body 1) ---
    # URDF: first_pendulum_link
    M1: 0.09973
    # URDF: first_pendulum_link inertial origin y (absolute value)
    l4: 0.0646
    # URDF: pendulum2_joint_y (absolute value)
    l5: 0.1432
    # URDF: first_pendulum_link inertia ixx
    I1: 0.0001745
    
    # --- Pendulum 2 (Body 2) ---
    # URDF: second_pendulum_link
    M2: 0.006806
    # URDF: second_pendulum_link inertial origin y (absolute value)
    l6: 0.0299
    # URDF: second_pendulum_link inertia ixx
    I2: 0.00000189
    
    
    # ============================================================
    # LQR GAINS (Stabilization at α=π, β=0)
    #
    # ***These are for the EP3 (Up-Up) state***
    # You will need to re-calculate these for your TANGENTIAL model
    # using the linearized A and B matrices.
    # The values from your old file are placeholders.
    # ============================================================
    K_theta: 3.162278
    K_alpha: -2075.754304  # Stabilizes α at π
    K_beta: -1406.793      # Stabilizes β at 0 (relative to α=π, so it's also UP)
    K_theta_dot: 4.751476
    K_alpha_dot: -171.094903
    K_beta_dot: -136.876
    
    # ============================================================
    # SWING-UP PARAMETERS (for EP3 Goal)
    # ============================================================
    
    energy_gain: 4.5       # Energy pumping gain
    damping_gain: 0.03146       # Damping near target
    initial_kick_torque: 0.0   # Initial kick (N·m)
    swing_up_max_torque: 20.0  # Max torque during swing-up (N·m)
    
    # ============================================================
    # MODE SWITCHING THRESHOLDS (for EP3 Goal)
    # ============================================================
    
    # Angle threshold for FIRST pendulum (from α=π)
    switch_to_lqr_angle_alpha: 0.4  # rad (~17°)
    
    # Angle threshold for SECOND pendulum (from β=0)
    switch_to_lqr_angle_beta: 0.4   # rad (~17°)
    
    # Velocity threshold for switching
    switch_to_lqr_velocity: 40.0     # rad/s
    
    # Confirmation time before switching
    stabilization_time: 0.1        # seconds
    
    # Fall detection threshold (check both pendulums)
    fall_angle_threshold_alpha: 0.6 # rad (~34° from UP)
    fall_angle_threshold_beta: 0.6  # rad (~34° from UP)
    
    # ============================================================
    # CONTROL LIMITS
    # ============================================================
    lqr_max_torque: 20.0         # Max torque during LQR (N·m)
    enable_saturation: true     # Enable torque limiting
    
    # ============================================================
    # ROS TOPICS
    # ============================================================
    joint_names:
      - "revolute_joint"
      - "first_pendulum_joint"
      - "second_pendulum_joint"
    
    joint_states_topic: "/joint_states"
    effort_command_topic: "/effort_controller/commands"
    
    publish_debug_info: true
    debug_topic: "/swingup_lqr_debug"
